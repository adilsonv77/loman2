<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"                
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:udesc="http://java.sun.com/jsf/composite/udesc">

    <p:dialog header="#{msg.task}" 
              widgetVar="dialogTarefa"               
              modal="true" 
              height="550" 
              width="800" 
              resizable="false"
              appendToBody="true"
              id="dialogTarefa">
        <h:panelGrid columns="2">
        	<h:outputText value="#{msg.projects} : "/>
            <h:outputText value="#{empty cadRoteiro.selecProjeto.titulo ? '-' : cadRoteiro.selecProjeto.titulo}"/>
            <h:outputText value="#{msg.name} : "/>
            <h:outputText value="#{empty cadRoteiro.selecUnidade.nome ? '-' : cadRoteiro.selecUnidade.nome}"/>                                
        </h:panelGrid>

        <h:form id="formCadastroTarefas"
                onsubmit="#{cadRoteiro.setarRegistro()}">
            <h:panelGrid columns="2">  
                


                

            </h:panelGrid>
        </h:form>

        <h:form id="formTabelaTarefas">
            <p:dataTable id="roteiroTarefas" 
                         emptyMessage="#{msg.noTasksFound}" 
                         value="#{cadRoteiro.tarefasSlide}"
                         var="tarefa"
                         paginator="true"
                         paginatorPosition="top"
                         rows="4"
                         rowIndexVar="linha"
                         paginatorTemplate="{CurrentPageReport}  
                         {FirstPageLink} 
                         {PreviousPageLink} 
                         {PageLinks} 
                         {NextPageLink} 
                         {LastPageLink} 
                         {RowsPerPageDropdown}">                
                <p:column sortBy="#{tarefa.titulo}">
                    <f:facet name="header">
                        #{msg.task}
                    </f:facet>
                    <h:outputText value="#{tarefa.titulo}"/>
                </p:column>
                <p:column sortBy="#{tarefa.slide.titulo}">
                    <f:facet name="header">
                        #{msg.slide}
                    </f:facet>
                    <h:outputText value="#{tarefa.slide.titulo}"/>
                </p:column>
                <p:column sortBy="#{tarefa.papelEnum.toString()}">
                    <f:facet name="header">
                        #{msg.paper}
                    </f:facet>
                    <h:outputText value="#{tarefa.papelEnum.toString()}"/>
                </p:column>
                <p:column>                    
                    <p:commandButton icon="ui-icon ui-icon-pencil"                              
                                     title="#{msg.alter}"
                                     actionListener="#{cadRoteiro.alteraTarefa()}"
                                     update=":tabUnidadeSlideTarefa:formCadastroTarefas
                                     :tabUnidadeSlideTarefa:formTabelaTarefas">
                        <f:setPropertyActionListener value="#{tarefa}"
                                                     target="#{cadRoteiro.selecTarefa}" />
                    </p:commandButton>                    
                    <p:commandButton icon="ui-icon ui-icon-close"                              
                                     title="#{msg.delete}"
                                     oncomplete="confirmDeleteTarefa.show()">
                        <f:setPropertyActionListener value="#{tarefa}" 
                                                     target="#{cadRoteiro.selecTarefa}" />
                    </p:commandButton>                   
                </p:column>
            </p:dataTable> 
        </h:form>  
    </p:dialog>

</ui:composition> 