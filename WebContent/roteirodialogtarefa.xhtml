<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"                
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:udesc="http://java.sun.com/jsf/composite/udesc">

    <p:dialog header="#{msg.sceneUpper}" 
              widgetVar="dialogTarefa"               
              modal="true" 
              height="550" 
              width="900" 
              resizable="false"
              appendToBody="true"
              id="dlgTarefa">
        <h:panelGrid columns="2">
        	<h:outputText value="#{msg.project} : "/>
            <h:outputText value="#{empty cadRoteiro.selecUnidade.projeto.titulo ? '-' : cadRoteiro.selecUnidade.projeto.titulo}"/>
            <h:outputText value="#{msg.learningUnity} : "/>
            <h:outputText value="#{empty cadRoteiro.selecUnidade.nome ? '-' : cadRoteiro.selecUnidade.nome}"/>                                
        </h:panelGrid>
        <h:form id="formCadastroTarefas"  onsubmit="#{cadRoteiro.setarRegistro()}">
            <h:panelGrid columns="2">  
	            <p:tabView>
		            <p:tab title="#{msg.objectives}">
		                <p:dataTable emptyMessage="#{msg.noObjectivesFound}" 
		                             value="#{cadRoteiro.selecUnidade.objetivos}" 
		                             var="objetivo"
		                             paginator="true"
		                             paginatorPosition="top"
		                             rows="5"  
		                             paginatorTemplate="{CurrentPageReport}  
		                             {FirstPageLink} 
		                             {PreviousPageLink} 
		                             {PageLinks} 
		                             {NextPageLink} 
		                             {LastPageLink} 
		                             {RowsPerPageDropdown}">
		                    <p:column>
		                        <f:facet name="header">
		                            #{msg.objectives}
		                        </f:facet>
		                        <h:outputText value="#{objetivo.descricao}"/>
		                    </p:column>            
		                </p:dataTable>
		            </p:tab>    
		            <p:tab title="#{msg.contents}">
		                <p:dataTable emptyMessage="#{msg.noContentsFound}" 
		                             value="#{cadRoteiro.selecUnidade.conteudos}" 
		                             var="conteudo"
		                             paginator="true"
		                             paginatorPosition="top"
		                             rows="5"  
		                             paginatorTemplate="{CurrentPageReport}  
		                             {FirstPageLink} 
		                             {PreviousPageLink} 
		                             {PageLinks} 
		                             {NextPageLink} 
		                             {LastPageLink} 
		                             {RowsPerPageDropdown}">
		                    <p:column>
		                        <f:facet name="header">
		                            #{msg.contents}
		                        </f:facet>
		                        <h:outputText value="#{conteudo.descricao}"/>
		                    </p:column>                       
		                </p:dataTable>
		            </p:tab>
		            <p:tab title="#{msg.activities}">
		                <p:dataTable emptyMessage="#{msg.noActivitiesFound}"
		                             value="#{cadRoteiro.selecUnidade.atividades}" 
		                             var="atividade"
		                             paginator="true"
		                             paginatorPosition="top"
		                             rows="5"  
		                             paginatorTemplate="{CurrentPageReport}  
		                             {FirstPageLink} 
		                             {PreviousPageLink} 
		                             {PageLinks} 
		                             {NextPageLink} 
		                             {LastPageLink} 
		                             {RowsPerPageDropdown}">
		                    <p:column>
		                        <f:facet name="header">
		                            #{msg.activities}
		                        </f:facet>
		                        <h:outputText value="#{atividade.descricao}"/>
		                    </p:column>                        
		                </p:dataTable>
		            </p:tab>
		            <p:tab title="#{msg.assessmentForms}">
		                <p:dataTable emptyMessage="#{msg.noAssessmentFormsFound}" 
		                             value="#{cadRoteiro.selecUnidade.formasAvaliacao}"
		                             var="formaAvaliacao"
		                             paginator="true"
		                             paginatorPosition="top"
		                             rows="5"  
		                             paginatorTemplate="{CurrentPageReport}  
		                             {FirstPageLink} 
		                             {PreviousPageLink} 
		                             {PageLinks} 
		                             {NextPageLink} 
		                             {LastPageLink} 
		                             {RowsPerPageDropdown}">
		                    <p:column>
		                        <f:facet name="header">
		                            #{msg.assessmentForms}
		                        </f:facet>
		                        <h:outputText value="#{formaAvaliacao.descricao}"/>
		                    </p:column>                        
		                </p:dataTable>
		            </p:tab>
		        </p:tabView>
		        <h:panelGrid columns="1">
			        <h:panelGrid columns="2">            
		                    <h:outputText value="#{msg.title}:"/>
		                    <p:inputText id="tituloSlide"
		                                 value="#{cadRoteiro.selecSlide.titulo}" 
		                                 maxlength="50"                                     
		                                 size="48">
		                        <f:validateLength maximum="50"/>
		                    </p:inputText>
					</h:panelGrid>
					<p:editor id="editorCena" widgetVar="editorDoSlide" value="#{cadRoteiro.selecSlide.descricao}" width="400" height="300">
					</p:editor>
					<h:panelGrid columns="2" style="float:right">
						<p:commandButton id="addSlide" style="float:right;"
	                                     value="#{msg.save}"                                       
	                                     actionListener="#{cadRoteiro.addSlide()}"
	                                     update=":tabUnidadeSlideTarefa:formTabelaSlides"
	                                     oncomplete="dialogTarefa.hide()"
	                                     />
						<p:commandButton id="cancelAddSlide" style="float:right;" value="#{msg.cancel}" action="cancel" process="@this" />
					</h:panelGrid>
				</h:panelGrid>
            </h:panelGrid>
        </h:form>

        <h:form id="formTabelaTarefas">
            <!-- <p:dataTable id="roteiroTarefas" 
                         emptyMessage="#{msg.noTasksFound}" 
                         value="#{cadRoteiro.tarefasSlide}"
                         var="tarefa"
                         paginator="true"
                         paginatorPosition="top"
                         rows="4"
                         rowIndexVar="linha"
                         paginatorTemplate="{CurrentPageReport}  
                         {FirstPageLink} 
                         {PreviousPageLink} 
                         {PageLinks} 
                         {NextPageLink} 
                         {LastPageLink} 
                         {RowsPerPageDropdown}">                
                <p:column sortBy="#{tarefa.titulo}">
                    <f:facet name="header">
                        #{msg.task}
                    </f:facet>
                    <h:outputText value="#{tarefa.titulo}"/>
                </p:column>
                <p:column sortBy="#{tarefa.slide.titulo}">
                    <f:facet name="header">
                        #{msg.slide}
                    </f:facet>
                    <h:outputText value="#{tarefa.slide.titulo}"/>
                </p:column>
                <p:column sortBy="#{tarefa.papelEnum.toString()}">
                    <f:facet name="header">
                        #{msg.paper}
                    </f:facet>
                    <h:outputText value="#{tarefa.papelEnum.toString()}"/>
                </p:column>
                <p:column>                    
                    <p:commandButton icon="ui-icon ui-icon-pencil"                              
                                     title="#{msg.alter}"
                                     actionListener="#{cadRoteiro.alteraTarefa()}"
                                     update=":tabUnidadeSlideTarefa:formCadastroTarefas
                                     :tabUnidadeSlideTarefa:formTabelaTarefas">
                        <f:setPropertyActionListener value="#{tarefa}"
                                                     target="#{cadRoteiro.selecTarefa}" />
                    </p:commandButton>                    
                    <p:commandButton icon="ui-icon ui-icon-close"                              
                                     title="#{msg.delete}"
                                     oncomplete="confirmDeleteTarefa.show()">
                        <f:setPropertyActionListener value="#{tarefa}" 
                                                     target="#{cadRoteiro.selecTarefa}" />
                    </p:commandButton>                   
                </p:column>
            </p:dataTable> -->
        </h:form>  
    </p:dialog>

</ui:composition> 